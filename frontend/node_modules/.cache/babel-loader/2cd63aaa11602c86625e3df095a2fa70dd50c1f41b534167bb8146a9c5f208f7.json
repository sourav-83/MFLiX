{"ast":null,"code":"var _jsxFileName = \"D:\\\\react movie website\\\\frontend\\\\src\\\\pages\\\\Watchlist.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport MoviesList from \"../components/common/MoviesList\";\nimport { Typography, Container } from \"@mui/material\";\nimport url from \"../constants/url\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Watchlist = () => {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [watchlistName, setWatchlistName] = useState(\"Your Watchlist\");\n  useEffect(() => {\n    const fetchWatchlist = async () => {\n      try {\n        // The axios interceptor will automatically add the Authorization header\n        const response = await axios.get(`${url}/api/users/watchlist`);\n        const watchlistData = response.data;\n        setMovies(watchlistData.movies || []);\n        setWatchlistName(watchlistData.name || \"Your Watchlist\");\n      } catch (error) {\n        var _error$response;\n        console.error(\"Failed to fetch watchlist:\", error);\n\n        // Check if it's an authentication error\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n          console.log(\"User not authenticated, clearing local storage\");\n          localStorage.removeItem('user');\n          localStorage.removeItem('token');\n          // Optionally redirect to login\n          // window.location.href = '/login';\n        }\n        setMovies([]);\n      }\n    };\n    fetchWatchlist();\n  }, []);\n  console.log(movies.length);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    sx: {\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      sx: {\n        color: '#fff'\n      },\n      children: watchlistName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MoviesList, {\n      movies: movies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(Watchlist, \"g1PruOqUM9Tsp6W6EjruCHPA0M4=\");\n_c = Watchlist;\nexport default Watchlist;\nvar _c;\n$RefreshReg$(_c, \"Watchlist\");","map":{"version":3,"names":["useEffect","useState","axios","MoviesList","Typography","Container","url","jsxDEV","_jsxDEV","Watchlist","_s","movies","setMovies","watchlistName","setWatchlistName","fetchWatchlist","response","get","watchlistData","data","name","error","_error$response","console","status","log","localStorage","removeItem","length","sx","mt","children","variant","gutterBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/react movie website/frontend/src/pages/Watchlist.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport MoviesList from \"../components/common/MoviesList\";\r\nimport { Typography, Container } from \"@mui/material\";\r\nimport url from \"../constants/url\";\r\n\r\nconst Watchlist = () => {\r\n  const [movies, setMovies] = useState([]);\r\n  const [watchlistName, setWatchlistName] = useState(\"Your Watchlist\");\r\n\r\n  useEffect(() => {\r\n    const fetchWatchlist = async () => {\r\n      try {\r\n        // The axios interceptor will automatically add the Authorization header\r\n        const response = await axios.get(`${url}/api/users/watchlist`);\r\n\r\n        const watchlistData = response.data;\r\n        setMovies(watchlistData.movies || []);\r\n        setWatchlistName(watchlistData.name || \"Your Watchlist\");\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch watchlist:\", error);\r\n        \r\n        // Check if it's an authentication error\r\n        if (error.response?.status === 401) {\r\n          console.log(\"User not authenticated, clearing local storage\");\r\n          localStorage.removeItem('user');\r\n          localStorage.removeItem('token');\r\n          // Optionally redirect to login\r\n          // window.location.href = '/login';\r\n        }\r\n        \r\n        setMovies([]);\r\n      }\r\n    };\r\n\r\n    fetchWatchlist();\r\n  }, []);\r\n  console.log(movies.length)\r\n  return (\r\n    <Container sx={{ mt: 4 }}>\r\n      <Typography variant=\"h5\" gutterBottom sx={{ color: '#fff' }}>\r\n        {watchlistName}\r\n      </Typography>\r\n      <MoviesList movies={movies} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Watchlist;"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,iCAAiC;AACxD,SAASC,UAAU,EAAEC,SAAS,QAAQ,eAAe;AACrD,OAAOC,GAAG,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACY,aAAa,EAAEC,gBAAgB,CAAC,GAAGb,QAAQ,CAAC,gBAAgB,CAAC;EAEpED,SAAS,CAAC,MAAM;IACd,MAAMe,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF;QACA,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,GAAG,CAAC,GAAGX,GAAG,sBAAsB,CAAC;QAE9D,MAAMY,aAAa,GAAGF,QAAQ,CAACG,IAAI;QACnCP,SAAS,CAACM,aAAa,CAACP,MAAM,IAAI,EAAE,CAAC;QACrCG,gBAAgB,CAACI,aAAa,CAACE,IAAI,IAAI,gBAAgB,CAAC;MAC1D,CAAC,CAAC,OAAOC,KAAK,EAAE;QAAA,IAAAC,eAAA;QACdC,OAAO,CAACF,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;;QAElD;QACA,IAAI,EAAAC,eAAA,GAAAD,KAAK,CAACL,QAAQ,cAAAM,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;UAClCD,OAAO,CAACE,GAAG,CAAC,gDAAgD,CAAC;UAC7DC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;UAC/BD,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;UAChC;UACA;QACF;QAEAf,SAAS,CAAC,EAAE,CAAC;MACf;IACF,CAAC;IAEDG,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EACNQ,OAAO,CAACE,GAAG,CAACd,MAAM,CAACiB,MAAM,CAAC;EAC1B,oBACEpB,OAAA,CAACH,SAAS;IAACwB,EAAE,EAAE;MAAEC,EAAE,EAAE;IAAE,CAAE;IAAAC,QAAA,gBACvBvB,OAAA,CAACJ,UAAU;MAAC4B,OAAO,EAAC,IAAI;MAACC,YAAY;MAACJ,EAAE,EAAE;QAAEK,KAAK,EAAE;MAAO,CAAE;MAAAH,QAAA,EACzDlB;IAAa;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eACb9B,OAAA,CAACL,UAAU;MAACQ,MAAM,EAAEA;IAAO;MAAAwB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrB,CAAC;AAEhB,CAAC;AAAC5B,EAAA,CAxCID,SAAS;AAAA8B,EAAA,GAAT9B,SAAS;AA0Cf,eAAeA,SAAS;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}