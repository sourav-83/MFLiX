{"ast":null,"code":"var _jsxFileName = \"D:\\\\react movie website\\\\frontend\\\\src\\\\pages\\\\Watchlist.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport MoviesList from \"../components/common/MoviesList\";\nimport { Typography, Container } from \"@mui/material\";\nimport url from \"../constants/url\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Watchlist = () => {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [watchlistName, setWatchlistName] = useState(\"Your Watchlist\");\n  useEffect(() => {\n    const fetchWatchlist = async () => {\n      try {\n        const response = await axios.get(`${url}/api/users/watchlist`);\n\n        // Debug logs\n        console.log(\"Full response:\", response.data);\n        console.log(\"Response type:\", typeof response.data);\n        console.log(\"Is array:\", Array.isArray(response.data));\n\n        // Fix: Handle the actual response structure\n        let moviesData = [];\n        let watchlistNameData = \"Your Watchlist\";\n        if (Array.isArray(response.data)) {\n          // If response.data is directly an array of movies\n          moviesData = response.data;\n        } else if (response.data && Array.isArray(response.data.movies)) {\n          // If response.data has a movies property\n          moviesData = response.data.movies;\n          watchlistNameData = response.data.name || \"Your Watchlist\";\n        } else if (response.data && response.data.data && Array.isArray(response.data.data)) {\n          // If nested in data property\n          moviesData = response.data.data;\n        }\n        console.log(\"Movies to set:\", moviesData);\n        console.log(\"Movies length:\", moviesData.length);\n        setMovies(moviesData);\n        setWatchlistName(watchlistNameData);\n      } catch (error) {\n        var _error$response;\n        console.error(\"Failed to fetch watchlist:\", error);\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n          console.log(\"User not authenticated, clearing local storage\");\n          localStorage.removeItem('user');\n          localStorage.removeItem('token');\n        }\n        setMovies([]);\n      }\n    };\n    fetchWatchlist();\n  }, []);\n\n  // Debug log for movies state\n  console.log(\"Current movies state:\", movies);\n  console.log(\"Movies state length:\", movies.length);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    sx: {\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      sx: {\n        color: '#fff'\n      },\n      children: watchlistName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), movies.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n      sx: {\n        color: '#fff',\n        mt: 2\n      },\n      children: \"No movies in watchlist\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(MoviesList, {\n      movies: movies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(Watchlist, \"g1PruOqUM9Tsp6W6EjruCHPA0M4=\");\n_c = Watchlist;\nexport default Watchlist;\nvar _c;\n$RefreshReg$(_c, \"Watchlist\");","map":{"version":3,"names":["useEffect","useState","axios","MoviesList","Typography","Container","url","jsxDEV","_jsxDEV","Watchlist","_s","movies","setMovies","watchlistName","setWatchlistName","fetchWatchlist","response","get","console","log","data","Array","isArray","moviesData","watchlistNameData","name","length","error","_error$response","status","localStorage","removeItem","sx","mt","children","variant","gutterBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/react movie website/frontend/src/pages/Watchlist.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport MoviesList from \"../components/common/MoviesList\";\r\nimport { Typography, Container } from \"@mui/material\";\r\nimport url from \"../constants/url\";\r\n\r\nconst Watchlist = () => {\r\n  const [movies, setMovies] = useState([]);\r\n  const [watchlistName, setWatchlistName] = useState(\"Your Watchlist\");\r\n\r\n  useEffect(() => {\r\n    const fetchWatchlist = async () => {\r\n      try {\r\n        const response = await axios.get(`${url}/api/users/watchlist`);\r\n        \r\n        // Debug logs\r\n        console.log(\"Full response:\", response.data);\r\n        console.log(\"Response type:\", typeof response.data);\r\n        console.log(\"Is array:\", Array.isArray(response.data));\r\n\r\n        // Fix: Handle the actual response structure\r\n        let moviesData = [];\r\n        let watchlistNameData = \"Your Watchlist\";\r\n\r\n        if (Array.isArray(response.data)) {\r\n          // If response.data is directly an array of movies\r\n          moviesData = response.data;\r\n        } else if (response.data && Array.isArray(response.data.movies)) {\r\n          // If response.data has a movies property\r\n          moviesData = response.data.movies;\r\n          watchlistNameData = response.data.name || \"Your Watchlist\";\r\n        } else if (response.data && response.data.data && Array.isArray(response.data.data)) {\r\n          // If nested in data property\r\n          moviesData = response.data.data;\r\n        }\r\n\r\n        console.log(\"Movies to set:\", moviesData);\r\n        console.log(\"Movies length:\", moviesData.length);\r\n\r\n        setMovies(moviesData);\r\n        setWatchlistName(watchlistNameData);\r\n        \r\n      } catch (error) {\r\n        console.error(\"Failed to fetch watchlist:\", error);\r\n        \r\n        if (error.response?.status === 401) {\r\n          console.log(\"User not authenticated, clearing local storage\");\r\n          localStorage.removeItem('user');\r\n          localStorage.removeItem('token');\r\n        }\r\n        \r\n        setMovies([]);\r\n      }\r\n    };\r\n\r\n    fetchWatchlist();\r\n  }, []);\r\n\r\n  // Debug log for movies state\r\n  console.log(\"Current movies state:\", movies);\r\n  console.log(\"Movies state length:\", movies.length);\r\n\r\n  return (\r\n    <Container sx={{ mt: 4 }}>\r\n      <Typography variant=\"h5\" gutterBottom sx={{ color: '#fff' }}>\r\n        {watchlistName}\r\n      </Typography>\r\n      {movies.length === 0 ? (\r\n        <Typography sx={{ color: '#fff', mt: 2 }}>\r\n          No movies in watchlist\r\n        </Typography>\r\n      ) : (\r\n        <MoviesList movies={movies} />\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Watchlist;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}