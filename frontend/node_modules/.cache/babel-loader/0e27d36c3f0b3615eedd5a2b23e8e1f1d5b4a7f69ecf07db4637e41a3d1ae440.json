{"ast":null,"code":"var _jsxFileName = \"D:\\\\react movie website\\\\frontend\\\\src\\\\components\\\\movie details\\\\ReviewsSection.jsx\",\n  _s = $RefreshSig$();\n// ReviewsSection.jsx\nimport React, { useState } from \"react\";\nimport { Box, Typography, Chip, Divider, IconButton, Paper, styled, Button, Alert, Menu, MenuItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport { ThumbUp, ThumbDown, Visibility, VisibilityOff, Star, StarBorder, MoreVert, Report, Flag } from \"@mui/icons-material\";\nimport { useAuth } from \"../contexts/AuthContext\"; // Import useAuth hook\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ReviewCard = styled(Paper)`\n  background: rgba(50, 50, 50, 0.9);\n  color: white;\n  padding: 20px;\n  margin-bottom: 15px;\n  border-radius: 12px;\n`;\n_c = ReviewCard;\nconst SpoilerButton = styled(Button)`\n  background: ${props => props.showspoiler ? 'rgba(255, 152, 0, 0.8)' : 'rgba(255, 152, 0, 0.2)'};\n  color: white;\n  border: 1px solid #ff9800;\n  &:hover {\n    background: rgba(255, 152, 0, 0.9);\n  }\n`;\n_c2 = SpoilerButton;\nconst StarRating = styled(Box)`\n  display: flex;\n  align-items: center;\n  gap: 2px;\n`;\n_c3 = StarRating;\nconst UserInfo = styled(Box)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n`;\n_c4 = UserInfo;\nconst VoteButton = styled(IconButton)`\n  &.voted {\n    color: #1976d2;\n  }\n  &.voted-down {\n    color: #d32f2f;\n  }\n`;\n_c5 = VoteButton;\nconst ReviewHeaderActions = styled(Box)`\n  display: flex;\n  align-items: center;\n  gap: 1px;\n`;\n_c6 = ReviewHeaderActions;\nfunction ReviewsSection({\n  reviews,\n  formatDate,\n  onVoteReview,\n  onReportReview,\n  userVotes = {}\n}) {\n  _s();\n  var _reviews$;\n  const [spoilerVisibility, setSpoilerVisibility] = useState({});\n  const [menuAnchor, setMenuAnchor] = useState(null);\n  const [selectedReviewId, setSelectedReviewId] = useState(null);\n  const {\n    isAuthenticated\n  } = useAuth();\n  console.log('Reviews in component:', reviews);\n  console.log('First review user:', reviews === null || reviews === void 0 ? void 0 : (_reviews$ = reviews[0]) === null || _reviews$ === void 0 ? void 0 : _reviews$.user);\n  const toggleSpoilerVisibility = reviewIndex => {\n    setSpoilerVisibility(prev => ({\n      ...prev,\n      [reviewIndex]: !prev[reviewIndex]\n    }));\n  };\n  const handleVote = async (reviewId, voteType) => {\n    if (!isAuthenticated) {\n      alert('Please log in to vote on reviews');\n      return;\n    }\n    try {\n      await onVoteReview(reviewId, voteType);\n    } catch (error) {\n      console.error('Error voting:', error);\n      alert('Failed to submit vote. Please try again.');\n    }\n  };\n  const handleMenuOpen = (event, reviewId) => {\n    setMenuAnchor(event.currentTarget);\n    setSelectedReviewId(reviewId);\n  };\n  const handleMenuClose = () => {\n    setMenuAnchor(null);\n    setSelectedReviewId(null);\n  };\n  const handleReportReview = async () => {\n    if (!isAuthenticated) {\n      alert('Please log in to report reviews');\n      handleMenuClose();\n      return;\n    }\n    try {\n      await onReportReview(selectedReviewId);\n      handleMenuClose();\n    } catch (error) {\n      console.error('Error reporting review:', error);\n      alert('Failed to report review. Please try again.');\n      handleMenuClose();\n    }\n  };\n  const renderStars = rating => {\n    const stars = [];\n    for (let i = 1; i <= 10; i++) {\n      stars.push(/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          color: i <= rating ? '#ffd700' : '#666'\n        },\n        children: i <= rating ? /*#__PURE__*/_jsxDEV(Star, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(StarBorder, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 54\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this));\n    }\n    return stars;\n  };\n\n  // Filter out rating-only submissions (reviews with empty title and content)\n  const filteredReviews = reviews ? reviews.filter(review => {\n    // Keep reviews that have either title or content (or both)\n    return review.title && review.title.trim() !== '' || review.content && review.content.trim() !== '';\n  }) : [];\n  if (!reviews || reviews.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        sx: {\n          color: 'white'\n        },\n        children: \"Reviews (0)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          color: 'grey.400',\n          fontStyle: 'italic'\n        },\n        children: \"No reviews yet. Be the first to share your thoughts!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If all reviews are filtered out (only ratings), show appropriate message\n  if (filteredReviews.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        sx: {\n          color: 'white'\n        },\n        children: \"Reviews (0)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          color: 'grey.400',\n          fontStyle: 'italic'\n        },\n        children: \"No written reviews yet. Users have rated this movie, but no detailed reviews have been submitted.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          color: 'grey.400',\n          fontStyle: 'italic',\n          mt: 1\n        },\n        children: \"Be the first to write a review!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      sx: {\n        color: 'white',\n        mb: 2\n      },\n      children: [\"Reviews (\", filteredReviews.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), reviews.length > filteredReviews.length && /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      sx: {\n        color: 'grey.400',\n        mb: 2,\n        fontStyle: 'italic'\n      },\n      children: [reviews.length - filteredReviews.length, \" user\", reviews.length - filteredReviews.length > 1 ? 's have' : ' has', \" rated this movie without writing a review.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }, this), filteredReviews.map((review, index) => {\n      var _review$user;\n      return /*#__PURE__*/_jsxDEV(ReviewCard, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"flex-start\",\n          mb: 2,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            flex: 1,\n            children: [/*#__PURE__*/_jsxDEV(UserInfo, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  color: '#64b5f6',\n                  fontWeight: 'bold'\n                },\n                children: [\"@\", ((_review$user = review.user) === null || _review$user === void 0 ? void 0 : _review$user.username) || 'Anonymous']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  color: 'grey.400'\n                },\n                children: \"\\u2022\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  color: 'grey.400'\n                },\n                children: formatDate(review.createdat)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), review.title && review.title.trim() !== '' && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: review.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 1,\n              mb: 1,\n              children: [/*#__PURE__*/_jsxDEV(StarRating, {\n                children: renderStars(review.ratingscore)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  background: 'linear-gradient(45deg, #ff6b6b, #ffd93d)',\n                  WebkitBackgroundClip: 'text',\n                  WebkitTextFillColor: 'transparent',\n                  fontWeight: 'bold',\n                  fontSize: '1.1rem',\n                  ml: 1\n                },\n                children: [review.ratingscore, \"/10\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ReviewHeaderActions, {\n            children: [review.hasspoiler && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(SpoilerButton, {\n                size: \"small\",\n                startIcon: spoilerVisibility[index] ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 59\n                }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 79\n                }, this),\n                onClick: () => toggleSpoilerVisibility(index),\n                showspoiler: spoilerVisibility[index],\n                children: spoilerVisibility[index] ? 'Hide Spoiler' : 'Show Spoiler'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                label: \"Spoiler\",\n                color: \"warning\",\n                size: \"small\",\n                sx: {\n                  ml: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: e => handleMenuOpen(e, review.id),\n              sx: {\n                color: 'grey.400',\n                ml: 1,\n                '&:hover': {\n                  color: 'grey.300'\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(MoreVert, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), review.content && review.content.trim() !== '' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: review.hasspoiler && !spoilerVisibility[index] ? /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"warning\",\n            sx: {\n              mb: 2\n            },\n            children: \"This review contains spoilers. Click \\\"Show Spoiler\\\" to view the content.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            mb: 2,\n            sx: {\n              lineHeight: 1.6\n            },\n            children: review.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this)\n        }, void 0, false), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            backgroundColor: 'grey.700',\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 3,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 1,\n            children: [/*#__PURE__*/_jsxDEV(VoteButton, {\n              size: \"small\",\n              className: userVotes[review.id] === 'upvote' ? 'voted' : '',\n              sx: {\n                color: userVotes[review.id] === 'upvote' ? '#1976d2' : 'grey.400'\n              },\n              onClick: () => handleVote(review.id, 'upvote'),\n              disabled: !isAuthenticated,\n              children: /*#__PURE__*/_jsxDEV(ThumbUp, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: review.upvotes || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 1,\n            children: [/*#__PURE__*/_jsxDEV(VoteButton, {\n              size: \"small\",\n              className: userVotes[review.id] === 'downvote' ? 'voted-down' : '',\n              sx: {\n                color: userVotes[review.id] === 'downvote' ? '#d32f2f' : 'grey.400'\n              },\n              onClick: () => handleVote(review.id, 'downvote'),\n              disabled: !isAuthenticated,\n              children: /*#__PURE__*/_jsxDEV(ThumbDown, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: review.downvotes || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), !isAuthenticated && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              color: 'grey.500',\n              ml: 'auto'\n            },\n            children: \"Login to vote on reviews\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, review.id || index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(Menu, {\n      anchorEl: menuAnchor,\n      open: Boolean(menuAnchor),\n      onClose: handleMenuClose,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'right'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      PaperProps: {\n        sx: {\n          bgcolor: 'rgba(40, 40, 40, 0.95)',\n          color: 'white',\n          backdropFilter: 'blur(10px)',\n          border: '1px solid rgba(255, 255, 255, 0.1)'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: handleReportReview,\n        disabled: !isAuthenticated,\n        children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n          children: /*#__PURE__*/_jsxDEV(Flag, {\n            sx: {\n              color: isAuthenticated ? '#ff6b6b' : 'grey.500'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: \"Report Review\",\n          sx: {\n            color: isAuthenticated ? 'white' : 'grey.500'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), !isAuthenticated && /*#__PURE__*/_jsxDEV(MenuItem, {\n        disabled: true,\n        children: /*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: \"Login to report\",\n          sx: {\n            color: 'grey.500',\n            fontSize: '0.8rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewsSection, \"Vl29RiN9EcidDij6FfrILJfaFK8=\", false, function () {\n  return [useAuth];\n});\n_c7 = ReviewsSection;\nexport default ReviewsSection;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"ReviewCard\");\n$RefreshReg$(_c2, \"SpoilerButton\");\n$RefreshReg$(_c3, \"StarRating\");\n$RefreshReg$(_c4, \"UserInfo\");\n$RefreshReg$(_c5, \"VoteButton\");\n$RefreshReg$(_c6, \"ReviewHeaderActions\");\n$RefreshReg$(_c7, \"ReviewsSection\");","map":{"version":3,"names":["React","useState","Box","Typography","Chip","Divider","IconButton","Paper","styled","Button","Alert","Menu","MenuItem","ListItemIcon","ListItemText","ThumbUp","ThumbDown","Visibility","VisibilityOff","Star","StarBorder","MoreVert","Report","Flag","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","ReviewCard","_c","SpoilerButton","props","showspoiler","_c2","StarRating","_c3","UserInfo","_c4","VoteButton","_c5","ReviewHeaderActions","_c6","ReviewsSection","reviews","formatDate","onVoteReview","onReportReview","userVotes","_s","_reviews$","spoilerVisibility","setSpoilerVisibility","menuAnchor","setMenuAnchor","selectedReviewId","setSelectedReviewId","isAuthenticated","console","log","user","toggleSpoilerVisibility","reviewIndex","prev","handleVote","reviewId","voteType","alert","error","handleMenuOpen","event","currentTarget","handleMenuClose","handleReportReview","renderStars","rating","stars","i","push","sx","color","children","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","filteredReviews","filter","review","title","trim","content","length","variant","gutterBottom","fontStyle","mt","mb","map","index","_review$user","display","justifyContent","alignItems","flex","fontWeight","username","createdat","gap","ratingscore","background","WebkitBackgroundClip","WebkitTextFillColor","ml","hasspoiler","size","startIcon","onClick","label","e","id","severity","lineHeight","backgroundColor","className","disabled","upvotes","downvotes","anchorEl","open","Boolean","onClose","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","bgcolor","backdropFilter","border","primary","_c7","$RefreshReg$"],"sources":["D:/react movie website/frontend/src/components/movie details/ReviewsSection.jsx"],"sourcesContent":["// ReviewsSection.jsx\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Chip,\r\n  Divider,\r\n  IconButton,\r\n  Paper,\r\n  styled,\r\n  Button,\r\n  Alert,\r\n  Menu,\r\n  MenuItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n} from \"@mui/material\";\r\nimport { \r\n  ThumbUp, \r\n  ThumbDown, \r\n  Visibility, \r\n  VisibilityOff, \r\n  Star, \r\n  StarBorder,\r\n  MoreVert,\r\n  Report,\r\n  Flag\r\n} from \"@mui/icons-material\";\r\nimport { useAuth } from \"../contexts/AuthContext\"; // Import useAuth hook\r\n\r\nconst ReviewCard = styled(Paper)`\r\n  background: rgba(50, 50, 50, 0.9);\r\n  color: white;\r\n  padding: 20px;\r\n  margin-bottom: 15px;\r\n  border-radius: 12px;\r\n`;\r\n\r\nconst SpoilerButton = styled(Button)`\r\n  background: ${props => props.showspoiler ? 'rgba(255, 152, 0, 0.8)' : 'rgba(255, 152, 0, 0.2)'};\r\n  color: white;\r\n  border: 1px solid #ff9800;\r\n  &:hover {\r\n    background: rgba(255, 152, 0, 0.9);\r\n  }\r\n`;\r\n\r\nconst StarRating = styled(Box)`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 2px;\r\n`;\r\n\r\nconst UserInfo = styled(Box)`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 8px;\r\n`;\r\n\r\nconst VoteButton = styled(IconButton)`\r\n  &.voted {\r\n    color: #1976d2;\r\n  }\r\n  &.voted-down {\r\n    color: #d32f2f;\r\n  }\r\n`;\r\n\r\nconst ReviewHeaderActions = styled(Box)`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1px;\r\n`;\r\n\r\nfunction ReviewsSection({ reviews, formatDate, onVoteReview, onReportReview, userVotes = {} }) {\r\n  \r\n  const [spoilerVisibility, setSpoilerVisibility] = useState({});\r\n  const [menuAnchor, setMenuAnchor] = useState(null);\r\n  const [selectedReviewId, setSelectedReviewId] = useState(null);\r\n  const { isAuthenticated } = useAuth();\r\n  \r\n  console.log('Reviews in component:', reviews);\r\n  console.log('First review user:', reviews?.[0]?.user);\r\n\r\n  const toggleSpoilerVisibility = (reviewIndex) => {\r\n    setSpoilerVisibility(prev => ({\r\n      ...prev,\r\n      [reviewIndex]: !prev[reviewIndex]\r\n    }));\r\n  };\r\n\r\n  const handleVote = async (reviewId, voteType) => {\r\n    if (!isAuthenticated) {\r\n      alert('Please log in to vote on reviews');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await onVoteReview(reviewId, voteType);\r\n    } catch (error) {\r\n      console.error('Error voting:', error);\r\n      alert('Failed to submit vote. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleMenuOpen = (event, reviewId) => {\r\n    setMenuAnchor(event.currentTarget);\r\n    setSelectedReviewId(reviewId);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuAnchor(null);\r\n    setSelectedReviewId(null);\r\n  };\r\n\r\n  const handleReportReview = async () => {\r\n    if (!isAuthenticated) {\r\n      alert('Please log in to report reviews');\r\n      handleMenuClose();\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await onReportReview(selectedReviewId);\r\n      handleMenuClose();\r\n    } catch (error) {\r\n      console.error('Error reporting review:', error);\r\n      alert('Failed to report review. Please try again.');\r\n      handleMenuClose();\r\n    }\r\n  };\r\n\r\n  const renderStars = (rating) => {\r\n    const stars = [];\r\n    for (let i = 1; i <= 10; i++) {\r\n      stars.push(\r\n        <Box key={i} sx={{ color: i <= rating ? '#ffd700' : '#666' }}>\r\n          {i <= rating ? <Star fontSize=\"small\" /> : <StarBorder fontSize=\"small\" />}\r\n        </Box>\r\n      );\r\n    }\r\n    return stars;\r\n  };\r\n\r\n  // Filter out rating-only submissions (reviews with empty title and content)\r\n  const filteredReviews = reviews ? reviews.filter(review => {\r\n    // Keep reviews that have either title or content (or both)\r\n    return (review.title && review.title.trim() !== '') || \r\n           (review.content && review.content.trim() !== '');\r\n  }) : [];\r\n\r\n  if (!reviews || reviews.length === 0) {\r\n    return (\r\n      <Box>\r\n        <Typography variant=\"h5\" gutterBottom sx={{ color: 'white' }}>\r\n          Reviews (0)\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ color: 'grey.400', fontStyle: 'italic' }}>\r\n          No reviews yet. Be the first to share your thoughts!\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  // If all reviews are filtered out (only ratings), show appropriate message\r\n  if (filteredReviews.length === 0) {\r\n    return (\r\n      <Box>\r\n        <Typography variant=\"h5\" gutterBottom sx={{ color: 'white' }}>\r\n          Reviews (0)\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ color: 'grey.400', fontStyle: 'italic' }}>\r\n          No written reviews yet. Users have rated this movie, but no detailed reviews have been submitted.\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ color: 'grey.400', fontStyle: 'italic', mt: 1 }}>\r\n          Be the first to write a review!\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h5\" sx={{ color: 'white', mb: 2 }}>\r\n        Reviews ({filteredReviews.length})\r\n      </Typography>\r\n      {reviews.length > filteredReviews.length && (\r\n        <Typography variant=\"body2\" sx={{ color: 'grey.400', mb: 2, fontStyle: 'italic' }}>\r\n          {reviews.length - filteredReviews.length} user{reviews.length - filteredReviews.length > 1 ? 's have' : ' has'} rated this movie without writing a review.\r\n        </Typography>\r\n      )}\r\n\r\n      {filteredReviews.map((review, index) => (\r\n        <ReviewCard key={review.id || index}>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-start\" mb={2}>\r\n            <Box flex={1}>\r\n              <UserInfo>\r\n                <Typography variant=\"body2\" sx={{ \r\n                  color: '#64b5f6',\r\n                  fontWeight: 'bold'\r\n                }}>\r\n                  @{review.user?.username || 'Anonymous'}\r\n                </Typography>\r\n                <Typography variant=\"body2\" sx={{ color: 'grey.400' }}>\r\n                  •\r\n                </Typography>\r\n                <Typography variant=\"body2\" sx={{ color: 'grey.400' }}>\r\n                  {formatDate(review.createdat)}\r\n                </Typography>\r\n              </UserInfo>\r\n              \r\n              {review.title && review.title.trim() !== '' && (\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  {review.title}\r\n                </Typography>\r\n              )}\r\n              \r\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\r\n                <StarRating>\r\n                  {renderStars(review.ratingscore)}\r\n                </StarRating>\r\n                <Typography variant=\"body2\" sx={{ \r\n                  background: 'linear-gradient(45deg, #ff6b6b, #ffd93d)', \r\n                  WebkitBackgroundClip: 'text',\r\n                  WebkitTextFillColor: 'transparent',\r\n                  fontWeight: 'bold',\r\n                  fontSize: '1.1rem',\r\n                  ml: 1\r\n                }}>\r\n                  {review.ratingscore}/10\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            \r\n            <ReviewHeaderActions>\r\n              {review.hasspoiler && (\r\n                <>\r\n                  <SpoilerButton\r\n                    size=\"small\"\r\n                    startIcon={spoilerVisibility[index] ? <VisibilityOff /> : <Visibility />}\r\n                    onClick={() => toggleSpoilerVisibility(index)}\r\n                    showspoiler={spoilerVisibility[index]}\r\n                  >\r\n                    {spoilerVisibility[index] ? 'Hide Spoiler' : 'Show Spoiler'}\r\n                  </SpoilerButton>\r\n                  <Chip\r\n                    label=\"Spoiler\"\r\n                    color=\"warning\"\r\n                    size=\"small\"\r\n                    sx={{ ml: 1 }}\r\n                  />\r\n                </>\r\n              )}\r\n              \r\n              {/* Report Menu */}\r\n              <IconButton\r\n                size=\"small\"\r\n                onClick={(e) => handleMenuOpen(e, review.id)}\r\n                sx={{ \r\n                  color: 'grey.400',\r\n                  ml: 1,\r\n                  '&:hover': { color: 'grey.300' }\r\n                }}\r\n              >\r\n                <MoreVert />\r\n              </IconButton>\r\n            </ReviewHeaderActions>\r\n          </Box>\r\n          \r\n          {review.content && review.content.trim() !== '' && (\r\n            <>\r\n              {review.hasspoiler && !spoilerVisibility[index] ? (\r\n                <Alert severity=\"warning\" sx={{ mb: 2 }}>\r\n                  This review contains spoilers. Click \"Show Spoiler\" to view the content.\r\n                </Alert>\r\n              ) : (\r\n                <Typography variant=\"body1\" mb={2} sx={{ lineHeight: 1.6 }}>\r\n                  {review.content}\r\n                </Typography>\r\n              )}\r\n            </>\r\n          )}\r\n          \r\n          <Divider sx={{ backgroundColor: 'grey.700', mb: 2 }} />\r\n          \r\n          <Box display=\"flex\" alignItems=\"center\" gap={3}>\r\n            <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n              <VoteButton \r\n                size=\"small\" \r\n                className={userVotes[review.id] === 'upvote' ? 'voted' : ''}\r\n                sx={{ color: userVotes[review.id] === 'upvote' ? '#1976d2' : 'grey.400' }}\r\n                onClick={() => handleVote(review.id, 'upvote')}\r\n                disabled={!isAuthenticated}\r\n              >\r\n                <ThumbUp fontSize=\"small\" />\r\n              </VoteButton>\r\n              <Typography variant=\"body2\">{review.upvotes || 0}</Typography>\r\n            </Box>\r\n            \r\n            <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n              <VoteButton \r\n                size=\"small\" \r\n                className={userVotes[review.id] === 'downvote' ? 'voted-down' : ''}\r\n                sx={{ color: userVotes[review.id] === 'downvote' ? '#d32f2f' : 'grey.400' }}\r\n                onClick={() => handleVote(review.id, 'downvote')}\r\n                disabled={!isAuthenticated}\r\n              >\r\n                <ThumbDown fontSize=\"small\" />\r\n              </VoteButton>\r\n              <Typography variant=\"body2\">{review.downvotes || 0}</Typography>\r\n            </Box>\r\n            \r\n            {!isAuthenticated && (\r\n              <Typography variant=\"caption\" sx={{ color: 'grey.500', ml: 'auto' }}>\r\n                Login to vote on reviews\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n        </ReviewCard>\r\n      ))}\r\n\r\n      {/* Report Menu */}\r\n      <Menu\r\n        anchorEl={menuAnchor}\r\n        open={Boolean(menuAnchor)}\r\n        onClose={handleMenuClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'right',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'right',\r\n        }}\r\n        PaperProps={{\r\n          sx: {\r\n            bgcolor: 'rgba(40, 40, 40, 0.95)',\r\n            color: 'white',\r\n            backdropFilter: 'blur(10px)',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n          }\r\n        }}\r\n      >\r\n        <MenuItem onClick={handleReportReview} disabled={!isAuthenticated}>\r\n          <ListItemIcon>\r\n            <Flag sx={{ color: isAuthenticated ? '#ff6b6b' : 'grey.500' }} />\r\n          </ListItemIcon>\r\n          <ListItemText \r\n            primary=\"Report Review\" \r\n            sx={{ color: isAuthenticated ? 'white' : 'grey.500' }}\r\n          />\r\n        </MenuItem>\r\n        {!isAuthenticated && (\r\n          <MenuItem disabled>\r\n            <ListItemText \r\n              primary=\"Login to report\"\r\n              sx={{ color: 'grey.500', fontSize: '0.8rem' }}\r\n            />\r\n          </MenuItem>\r\n        )}\r\n      </Menu>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ReviewsSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}